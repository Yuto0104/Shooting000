//=============================================================================
//
// モデルマネージャー処理(model_manager.h)
// Author : 唐﨑結斗
// 概要 : モデルマネージャーの設定を行う
//
//=============================================================================
#ifndef _MODEL_MANAGER_H_		// このマクロ定義がされてなかったら
#define _MODEL_MANAGER_H_		// 二重インクルード防止のマクロ定義

//*****************************************************************************
// インクルード
//*****************************************************************************
#include "main.h"
#include "model3D.h"

//=============================================================================
// モデルマネージャークラス
// Author : 唐﨑結斗
// 概要 : モデルマネージャーの設定を行うクラス
//=============================================================================
class CModelManager
{
public:
	//--------------------------------------------------------------------
	// モデルのマテリアル情報
	// Author : 唐﨑結斗
	// 概要 : モデルのマテリアル情報の設定
	//--------------------------------------------------------------------
	struct MODEL_MATERIAL
	{
		LPD3DXMESH		pMesh;				// メッシュ情報へのポインタ
		LPD3DXBUFFER	pBuffer;			// マテリアル情報へのポインタ
		DWORD			nNumMat;			// マテリアル情報の数
		char			aFileName[0xff];	// Xファイルのパス
	};

	//--------------------------------------------------------------------
	// オブジェクトの配置情報
	// Author : 唐﨑結斗
	// 概要 : 敵の配置情報
	//--------------------------------------------------------------------
	struct OBJECT_SETER
	{
		D3DXVECTOR3		pos;	// 位置
		D3DXVECTOR3		rot;	// 向き
		D3DXVECTOR3		size;	// 大きさ
		int				nID;	// 識別番号
	};

	//--------------------------------------------------------------------
	// コンストラクタとデストラクタ
	//--------------------------------------------------------------------
	CModelManager();
	~CModelManager();

	//--------------------------------------------------------------------
	// メンバ関数
	//--------------------------------------------------------------------
	// 初期化
	void Init(void);

	// 終了
	void Uninit(void);

	// モデルマテリアル情報のゲッター
	void GetModelMateria(const int nNumModel, LPD3DXMESH &pMesh, LPD3DXBUFFER &pBuffer,DWORD &nNumMat);

	// ファイルの読み込み
	void LoadFile(const char *pFileName);

	// モデルの種別設定
	int GetMaxModelMaterial() { return m_nMaxModelMaterial; }

	// モデルのファイル名のゲッター
	char *GetFileName(const int nNumFile) { return &m_pModelMaterial[nNumFile].aFileName[0]; }

	// 背景モデルの設定
	void SetModelBG();

private:
	//--------------------------------------------------------------------
	// メンバ変数
	//--------------------------------------------------------------------
	MODEL_MATERIAL		*m_pModelMaterial;			// モデルのマテリアル情報
	OBJECT_SETER		*m_pObjectSeter;			// オブジェクトの配置設定
	int					m_nMaxModelMaterial;		// モデルの種別数
	int					m_nMaxSetModelBG;			// 背景モデルの設置数		
};

#endif

